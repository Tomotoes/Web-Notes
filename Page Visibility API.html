<!DOCTYPE html>
<html lang="zh">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Document</title>
	</head>

	<body>
		<!--
			通常，我们使用各种事件，判断用户是否正在离开当前页面。
			
			visibilityState
			pageshow
			pagehide
			beforeunload
			unload
		-->
		<script type="text/javascript">
			console.log(document.visibilityState);

			document.addEventListener('visibilitychange', function() {
				// 页面变为不可见时触发
				if(document.visibilityState == 'hidden') {
					//do something...
				}
				// 页面变为可见时触发
				if(document.visibilityState == 'visible') {
					//do something...
				}
			});
			/*
			 这个 API 部署在document对象上，提供以下两个属性。

			document.hidden：返回一个布尔值，表示当前是否被隐藏。
			document.visibilityState：表示页面当前的状态，可以取三个值。
			visibile：页面可见
			hidden：页面不可见
			prerender：页面即将或正在渲染，不可见
			
			
			页面的可见状态发生变化时，会触发VisibilityChange事件。
			*/
		</script>
	</body>

</html>